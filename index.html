<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="/">
    <title>–®–ø–∏–æ–Ω | –û–Ω–ª–∞–π–Ω-–∏–≥—Ä–∞</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
</head>
<body class="dark-theme">
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–∞–¥–∞—é—â–∏—Ö —ç–º–æ–¥–∑–∏ (–¥–ª—è –æ–±–æ–∏—Ö —Ç–µ–º) -->
    <div class="emoji-rain"></div>
    
    <div class="container">
        <header style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
            <h1><a href="/" style="color: inherit; text-decoration: none;"><i class="fas fa-user-secret"></i> –®–ü–ò–û–ù</a></h1>
            <div class="header-search" style="flex: 1; max-width: 280px; position: relative;">
                <input type="text" id="headerSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ —é–∑–µ—Ä–Ω–µ–π–º—É..." autocomplete="off" style="width: 100%; padding: 8px 12px 8px 36px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.08); color: inherit;">
                <i class="fas fa-search" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #888; pointer-events: none;"></i>
                <div id="headerSearchResults" class="search-results-dropdown" style="display: none; position: absolute; top: 100%; left: 0; right: 0; margin-top: 4px; background: rgba(30,40,50,0.98); border: 1px solid rgba(255,255,255,0.15); border-radius: 8px; max-height: 280px; overflow-y: auto; z-index: 1000;"></div>
            </div>
            <div class="header-right" style="display: flex; align-items: center; gap: 20px;">
                <div id="authLinks" style="display: flex; align-items: center; gap: 15px;">
                    <div id="notificationsWrap" style="position: relative; display: none;">
                        <button id="notificationsBell" class="sound-toggle-btn" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">
                            <i class="fas fa-bell"></i>
                            <span id="notificationsBadge">0</span>
                        </button>
                        <div id="notificationsDropdown" class="search-results-dropdown" style="display: none; position: absolute; top: 100%; right: 0; margin-top: 4px; min-width: 320px; max-height: 400px; overflow-y: auto; background: rgba(20, 25, 35, 0.98) !important; border: 1px solid rgba(255,255,255,0.2) !important; box-shadow: 0 4px 12px rgba(0,0,0,0.3) !important;"></div>
                    </div>
                    <a href="/login" id="loginLink" style="color: #4db8ff; text-decoration: none;"><i class="fas fa-sign-in-alt"></i> –í–æ–π—Ç–∏</a>
                    <a href="/profile" id="profileLink" style="color: #4db8ff; text-decoration: none; display: none;"><i class="fas fa-user" style="margin-right: 6px;"></i><span id="userDisplayName">–ü—Ä–æ—Ñ–∏–ª—å</span></a>
                    <a href="/leaderboard" style="color: #4db8ff; text-decoration: none;"><i class="fas fa-trophy"></i> –†–µ–π—Ç–∏–Ω–≥</a>
                    <a href="#" id="logoutLink" style="color: #ff6b6b; text-decoration: none; display: none;">–í—ã–π—Ç–∏</a>
                </div>
                <div class="theme-toggle-container" style="margin-top: 4px;">
                    <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∑–≤—É–∫–æ–≤ -->
                    <button id="soundToggleBtn" class="sound-toggle-btn" title="–í–∫–ª/–í—ã–∫–ª –∑–≤—É–∫–∏">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <span class="theme-label">üåô</span>
                    <label class="switch">
                        <input type="checkbox" id="themeToggle">
                        <span class="slider"></span>
                    </label>
                    <span class="theme-label">‚òÄÔ∏è</span>
                    <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø–∞–¥–∞—é—â–∏—Ö —ç–º–æ–¥–∑–∏ -->
                    <button id="emojiToggleBtn" class="emoji-toggle-btn" title="–í–∫–ª/–í—ã–∫–ª –ø–∞–¥–∞—é—â–∏–µ —ç–º–æ–¥–∑–∏">
                        <i class="fas fa-cloud-moon"></i>
                    </button>
                    <!-- –ö–Ω–æ–ø–∫–∞ "–û —Å–∞–π—Ç–µ" -->
                    <button id="infoAboutSiteBtn" class="sound-toggle-btn" title="–û —Å–∞–π—Ç–µ –∏ –∏–≥—Ä–µ">
                        <i class="fas fa-info-circle"></i>
                    </button>
                </div>
            </div>
        </header>

        <main>
            <!-- –≠–∫—Ä–∞–Ω –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è -->
            <div id="connectionScreen" class="screen active">
                <div class="card">
                    <h2><i class="fas fa-gamepad"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∏–≥—Ä–µ</h2>
                    <div class="form-group" id="playerNameGroup">
                        <label for="playerName">–í–∞—à–µ –∏–º—è:</label>
                        <input type="text" id="playerName" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" maxlength="20">
                    </div>
                    <div class="form-group" id="playerNameAuthGroup" style="display: none;">
                        <label>–í–∞—à–µ –∏–º—è:</label>
                        <div id="playerNameDisplay" style="padding: 12px 15px; background: rgba(255,255,255,0.1); border-radius: 10px; font-weight: 600;"></div>
                        <small style="color: #888;">–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–º—è –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è</small>
                    </div>
                    <div class="form-group">
                        <label for="roomCode">–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã:</label>
                        <div class="input-with-button">
                            <input type="text" id="roomCode" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã">
                            <button id="pasteCode" class="icon-btn" title="–í—Å—Ç–∞–≤–∏—Ç—å –∏–∑ –±—É—Ñ–µ—Ä–∞">
                                <i class="fas fa-paste"></i>
                            </button>
                        </div>
                    </div>
                    <div id="errorContainer" class="error-container"></div>
                    <button id="joinRoom" class="btn-primary">
                        <i class="fas fa-sign-in-alt"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
                    </button>
                    <div class="divider">
                        <span>–∏–ª–∏</span>
                    </div>
                    <button id="createRoom" class="btn-secondary">
                        <i class="fas fa-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É
                    </button>
                </div>
            </div>

            <!-- –õ–æ–±–±–∏ (–æ–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤) -->
            <div id="lobbyScreen" class="screen">
                <div class="card">
                    <h2><i class="fas fa-users"></i> –õ–æ–±–±–∏ –∏–≥—Ä—ã</h2>
                    <div class="room-info">
                        <div class="room-code-display">
                            <p>–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã:</p>
                            <div class="code-container">
                                <strong id="roomCodeDisplay">----</strong>
                                <button id="copyCode" class="icon-btn" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button id="copyRoomLink" class="icon-btn" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –∫–æ–º–Ω–∞—Ç—É">
                                    <i class="fas fa-link"></i>
                                </button>
                                <button id="showRoomQr" class="icon-btn" title="–ü–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è">
                                    <i class="fas fa-qrcode"></i>
                                </button>
                            </div>
                        </div>
                        <div class="room-stats">
                            <p><i class="fas fa-users"></i> –ò–≥—Ä–æ–∫–æ–≤: <span id="playerCount">0</span>/10</p>
                            <p><i class="fas fa-crown"></i> –•–æ—Å—Ç: <span id="hostName">-</span></p>
                        </div>
                    </div>
                    
                    <div class="game-settings">
                        <h3><i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h3>
                        <div class="form-group">
                            <label>–õ–æ–∫–∞—Ü–∏–∏ –¥–ª—è –∏–≥—Ä—ã:</label>
                            <div id="locationsList" class="locations-chips"></div>
                            <button type="button" id="addLocationBtn" class="btn-secondary" style="margin-top: 10px; width: auto;">
                                <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é
                            </button>
                        </div>
                        <div id="lobbyErrorContainer" class="error-container"></div>
                        <button id="startGame" class="btn-primary" disabled>
                            <i class="fas fa-play"></i> –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                        </button>
                    </div>
                    
                    <div class="players-list">
                        <h3><i class="fas fa-user-friends"></i> –ò–≥—Ä–æ–∫–∏ –≤ –ª–æ–±–±–∏</h3>
                        <ul id="playersList">
                            <!-- –°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </ul>
                        <div id="inviteFriendsSection" style="margin-top: 15px; display: none;">
                            <h4 style="margin-bottom: 10px;"><i class="fas fa-user-plus"></i> –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π</h4>
                            <div id="friendsToInviteList" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
                        </div>
                    </div>
                    
                    <button id="leaveLobby" class="btn-secondary">
                        <i class="fas fa-sign-out-alt"></i> –ü–æ–∫–∏–Ω—É—Ç—å –ª–æ–±–±–∏
                    </button>
                </div>
            </div>

            <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏ -->
            <div id="addLocationModal" class="modal">
                <div class="modal-content">
                    <h2><i class="fas fa-map-marker-alt"></i> –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é</h2>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="newLocationName">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                            <input type="text" id="newLocationName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏">
                        </div>
                        <button type="button" id="addLocationConfirmBtn" class="btn-primary"><i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–≥—Ä—É</button>
                        <div id="myLocationsSection" style="margin-top: 15px; display: none;">
                            <p style="margin-bottom: 8px; color: #888;">–ò–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö:</p>
                            <div id="myLocationsList" class="locations-picker-list"></div>
                        </div>
                        <div id="addImagesToLocationSection" style="margin-top: 15px; display: none;">
                            <p style="margin-bottom: 8px; color: #888;">–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∫ –ª–æ–∫–∞—Ü–∏–∏:</p>
                            <div class="form-group">
                                <label>–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª:</label>
                                <input type="file" id="locationImageFile" accept="image/*" style="margin-bottom: 8px;">
                                <button type="button" id="uploadLocationImageBtn" class="btn-secondary" style="width: auto; margin-right: 8px;">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                            </div>
                            <div class="form-group">
                                <label>–ò–ª–∏ –≤—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É:</label>
                                <input type="url" id="newLocationImageUrl" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É" style="margin-bottom: 8px;">
                                <button type="button" id="addLocationImageUrlBtn" class="btn-secondary" style="width: auto; margin-right: 8px;">–î–æ–±–∞–≤–∏—Ç—å</button>
                            </div>
                            <button type="button" id="pickExistingImagesBtn" class="btn-secondary" style="width: auto;"><i class="fas fa-images"></i> –í—ã–±—Ä–∞—Ç—å –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö</button>
                            <div id="existingImagesPicker" style="display: none; margin-top: 10px; max-height: 150px; overflow-y: auto;"></div>
                            <button type="button" id="doneAddingImagesBtn" class="btn-primary" style="width: auto; margin-top: 10px;">–ì–æ—Ç–æ–≤–æ, –∑–∞–∫—Ä—ã—Ç—å</button>
                        </div>
                    </div>
                    <button type="button" id="closeAddLocationBtn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>

            <!-- –≠–∫—Ä–∞–Ω –∏–≥—Ä—ã -->
            <div id="gameScreen" class="screen">
                <div class="game-header">
                    <div class="game-info">
                        <div class="info-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>–õ–æ–∫–∞—Ü–∏—è: <strong id="locationHint">????</strong></span>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-user-tag"></i>
                            <span>–í–∞—à–∞ —Ä–æ–ª—å: <strong id="playerRole">–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ</strong></span>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-user-clock"></i>
                            <span>–•–æ–¥: <strong id="currentTurn">-</strong></span>
                        </div>
                    </div>
                    <div class="game-timer">
                        <div class="timer-container">
                            <i class="fas fa-clock"></i>
                            <div class="timer-display">
                                <span id="timer">60</span>
                                <span class="timer-label">—Å–µ–∫.</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="game-content">
                    <!-- –õ–µ–≤—ã–π –±–ª–æ–∫ - –ß–∞—Ç –æ–±—â–µ–Ω–∏—è -->
                    <div class="chat-section">
                        <!-- –û–±—â–∏–π —á–∞—Ç (—Å–≤–æ–±–æ–¥–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ) -->
                        <div class="social-chat">
                            <h3><i class="fas fa-comments"></i> –û–±—â–∏–π —á–∞—Ç</h3>
                            <div class="chat-description">
                                <p><i class="fas fa-info-circle"></i> –û–±—â–∞–π—Ç–µ—Å—å —Å–≤–æ–±–æ–¥–Ω–æ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π</p>
                            </div>
                            <div class="chat-messages" id="socialChatMessages">
                                <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–±—â–µ–≥–æ —á–∞—Ç–∞ -->
                            </div>
                            <div class="chat-input">
                                <input type="text" id="socialMessageInput" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                                <button id="sendSocialMessage">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>

                        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ö–æ–¥–µ –∏–≥—Ä—ã -->
                        <div class="game-info-section">
                            <h3><i class="fas fa-info-circle"></i> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ö–æ–¥–µ</h3>
                            <div class="turn-history" id="turnHistory">
                                <!-- –ò—Å—Ç–æ—Ä–∏—è —Ö–æ–¥–æ–≤ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                        </div>
                    </div>

                    <!-- –ü—Ä–∞–≤—ã–π –±–ª–æ–∫ - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π -->
                    <div class="game-controls">
                        <div class="players-status">
                            <h3><i class="fas fa-user-check"></i> –ò–≥—Ä–æ–∫–∏ –æ–Ω–ª–∞–π–Ω</h3>
                            <ul id="gamePlayersList">
                                <!-- –°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –≤ –∏–≥—Ä–µ -->
                            </ul>
                        </div>
                        
                        <div class="spy-action" id="spyActionSection">
                            <h3><i class="fas fa-user-secret"></i> –î–µ–π—Å—Ç–≤–∏–µ —à–ø–∏–æ–Ω–∞</h3>
                            <p>–ï—Å–ª–∏ –≤—ã —à–ø–∏–æ–Ω –∏ —É–≥–∞–¥–∞–ª–∏ –ª–æ–∫–∞—Ü–∏—é, –≤—ã –º–æ–∂–µ—Ç–µ —Å—Ä–∞–∑—É –∑–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É!</p>
                            <button id="spyGuessBtn" class="btn-warning">
                                <i class="fas fa-bullseye"></i> –£–≥–∞–¥–∞—Ç—å –ª–æ–∫–∞—Ü–∏—é
                            </button>
                        </div>
                        
                        <div class="early-vote">
                            <h3><i class="fas fa-exclamation-triangle"></i> –î–æ—Å—Ä–æ—á–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</h3>
                            <p>–ï—Å–ª–∏ –≤—ã –ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ—Ç–µ —à–ø–∏–æ–Ω–∞, –º–æ–∂–µ—Ç–µ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ä–æ—á–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</p>
                            <button id="initiateVote" class="btn-danger">
                                <i class="fas fa-hand-paper"></i> –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>–ò–≥—Ä–∞ "–®–ø–∏–æ–Ω" | –û–Ω–ª–∞–π–Ω-–≤–µ—Ä—Å–∏—è | –ú–∏–Ω–∏–º—É–º 3 –∏–≥—Ä–æ–∫–∞</p>
            <p class="connection-status" id="connectionStatus">
                <i class="fas fa-wifi"></i> <span>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É...</span>
            </p>
        </footer>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏–≥—Ä–æ–∫–∞ -->
    <div id="playerSelectModal" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle">–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä–æ–∫–∞</h2>
            <div class="modal-body">
                <p id="modalDescription">–ö–æ–º—É –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å?</p>
                <div class="player-options" id="playerOptions">
                    <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã –∏–≥—Ä–æ–∫–æ–≤ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
            <button id="cancelSelection" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ -->
    <div id="questionModal" class="modal">
        <div class="modal-content">
            <h2 id="questionModalTitle">–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å</h2>
            <div class="modal-body">
                <p>–í—ã –∑–∞–¥–∞–µ—Ç–µ –≤–æ–ø—Ä–æ—Å –∏–≥—Ä–æ–∫—É: <strong id="targetPlayerName">-</strong></p>
                <div class="form-group">
                    <label for="questionInput">–í–∞—à –≤–æ–ø—Ä–æ—Å:</label>
                    <textarea id="questionInput" rows="3" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..."></textarea>
                </div>
            </div>
            <button id="submitQuestion" class="btn-primary">–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å</button>
            <button id="cancelQuestion" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ -->
    <div id="answerModal" class="modal">
        <div class="modal-content">
            <h2>–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å</h2>
            <div class="modal-body">
                <p>–í–æ–ø—Ä–æ—Å –æ—Ç <strong id="askerPlayerName">-</strong>:</p>
                <div class="question-display" id="questionDisplay">
                    <!-- –í–æ–ø—Ä–æ—Å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
                <div class="form-group">
                    <label for="answerInput">–í–∞—à –æ—Ç–≤–µ—Ç:</label>
                    <textarea id="answerInput" rows="3" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
                </div>
            </div>
            <button id="submitAnswer" class="btn-primary">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è -->
    <div id="voteModal" class="modal">
        <div class="modal-content">
            <h2>–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</h2>
            <div class="modal-body">
                <p id="voteDescription">–ü—Ä–æ–≥–æ–ª–æ—Å—É–π—Ç–µ –∑–∞ –∏–≥—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π, –ø–æ –≤–∞—à–µ–º—É –º–Ω–µ–Ω–∏—é, —è–≤–ª—è–µ—Ç—Å—è —à–ø–∏–æ–Ω–æ–º:</p>
                <div class="player-options" id="votePlayerOptions">
                    <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
            <button id="submitVote" class="btn-primary">–ü—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å</button>
            <button id="cancelVote" class="btn-secondary">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —É–≥–∞–¥—ã–≤–∞–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏ —à–ø–∏–æ–Ω–æ–º -->
    <div id="spyGuessModal" class="modal">
        <div class="modal-content">
            <h2>–£–≥–∞–¥–∞–π—Ç–µ –ª–æ–∫–∞—Ü–∏—é</h2>
            <div class="modal-body">
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ª–æ–∫–∞—Ü–∏—é –∏–∑ 5 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:</p>
                <div class="player-options" id="spyGuessOptions">
                    <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã –ª–æ–∫–∞—Ü–∏–π –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
            <button id="closeSpyGuess" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- –§–∏–Ω–∞–ª—å–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–≥—Ä—ã -->
    <div id="finalResultsModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon" id="finalResultsIcon"></div>
            <h2 id="finalResultsTitle">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã</h2>
            <div id="finalResultsBody">
                <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
            </div>
            <div style="display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin-top: 20px;">
                <button id="closeFinalResults" class="btn-primary" style="flex: 1; min-width: 180px;">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞ –≤ —ç—Ç–æ–π –∫–æ–º–Ω–∞—Ç–µ</button>
                <button id="backToMainBtn" class="btn-secondary" style="flex: 1; min-width: 180px;">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å QR-–∫–æ–¥–æ–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è -->
    <div id="qrModal" class="modal">
        <div class="modal-content" style="max-width: 420px; text-align: center;">
            <h2><i class="fas fa-qrcode"></i> –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –∫–æ–º–Ω–∞—Ç—É</h2>
            <div class="modal-body">
                <p style="margin-bottom: 10px;">–ü–æ–ø—Ä–æ—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥, —á—Ç–æ–±—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ.</p>
                <div id="qrCodeContainer" class="qr-container">
                    <img id="qrCodeImage" alt="QR-–∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è" />
                </div>
                <p style="margin-top: 12px; font-size: 0.85rem; word-break: break-all; color: #ccc;">
                    –°—Å—ã–ª–∫–∞: <span id="qrInviteLink"></span>
                </p>
            </div>
            <button id="closeQr" class="btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <!-- –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <audio id="buttonSound" preload="auto">
        <source src="sounds/button.mp3" type="audio/mpeg">
    </audio>
    <audio id="winSound" preload="auto">
        <source src="sounds/win.mp3" type="audio/mpeg">
    </audio>
    <audio id="loseSound" preload="auto">
        <source src="sounds/lose.mp3" type="audio/mpeg">
    </audio>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "–û —Å–∞–π—Ç–µ" -->
    <div id="infoAboutSiteModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <h2><i class="fas fa-info-circle"></i> –û —Å–∞–π—Ç–µ –∏ –∏–≥—Ä–µ</h2>
            <div class="modal-body" style="text-align: left;">
                <p><strong>–°—É—Ç—å –∏–≥—Ä—ã ¬´–®–ø–∏–æ–Ω¬ª:</strong></p>
                <p>–í—Å–µ –∏–≥—Ä–æ–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –Ω–∞ –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ª–æ–∫–∞—Ü–∏—é, –∫—Ä–æ–º–µ –æ–¥–Ω–æ–≥–æ ‚Äî —à–ø–∏–æ–Ω–∞. –ú–∏—Ä–Ω—ã–µ –∂–∏—Ç–µ–ª–∏ –∑–Ω–∞—é—Ç –ª–æ–∫–∞—Ü–∏—é –∏ –∑–∞–¥–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥—É –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã –≤—ã—á–∏—Å–ª–∏—Ç—å —à–ø–∏–æ–Ω–∞. –®–ø–∏–æ–Ω –Ω–µ –∑–Ω–∞–µ—Ç –ª–æ–∫–∞—Ü–∏—é –∏ –ø—ã—Ç–∞–µ—Ç—Å—è –Ω–µ –≤—ã–¥–∞—Ç—å —Å–µ–±—è. –ò–≥—Ä–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ —à–ø–∏–æ–Ω–∞ –≤—ã—á–∏—Å–ª–∏–ª–∏ (–∏ –æ–Ω –Ω–µ —É–≥–∞–¥–∞–ª –ª–æ–∫–∞—Ü–∏—é) –∏–ª–∏ —à–ø–∏–æ–Ω —É–≥–∞–¥–∞–ª –ª–æ–∫–∞—Ü–∏—é.</p>
                <p style="margin-top: 12px;"><strong>–ö–Ω–æ–ø–∫–∏ –≤ —à–∞–ø–∫–µ:</strong></p>
                <ul style="margin: 8px 0 0 16px;">
                    <li><i class="fas fa-sun"></i> / <i class="fas fa-moon"></i> ‚Äî —Å–º–µ–Ω–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è (—Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è —Ç–µ–º–∞)</li>
                    <li><i class="fas fa-volume-up"></i> ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∑–≤—É–∫–æ–≤ –∏–≥—Ä—ã</li>
                    <li><i class="fas fa-cloud-moon"></i> ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–∞–¥–∞—é—â–∏—Ö —ç–º–æ–¥–∑–∏ –Ω–∞ —Ñ–æ–Ω–µ</li>
                    <li><i class="fas fa-info-circle"></i> ‚Äî —ç—Ç–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∞</li>
                </ul>
            </div>
            <button id="closeInfoAboutSiteBtn" class="btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ª–æ–∫–∞—Ü–∏–∏ -->
    <div id="locationImageViewerModal" class="modal">
        <div class="modal-content" style="max-width: 90%; max-height: 90vh; overflow: auto;">
            <div style="position: relative; display: flex; justify-content: center; align-items: center;">
                <img id="locationImageViewerImage" src="" alt="–ö–∞—Ä—Ç–∏–Ω–∫–∞ –ª–æ–∫–∞—Ü–∏–∏" style="max-width: 100%; max-height: 80vh; object-fit: contain; border-radius: 8px;">
                <button id="closeLocationImageViewer" class="modal-close-btn" style="position: absolute; top: -40px; right: 0; background: none; border: none; color: #fff; font-size: 2rem; cursor: pointer; padding: 0; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="app.js"></script>
</body>
</html>